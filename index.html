<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Mobile responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Generate Birth Chart Free</title>
  <meta name="description" content="Generate Birth Chart Free: Create your personalized Loshu grid numerology chart and compute your Driver, Conductor, Kuva, and Name Number using your name, birth date, and gender.">
<meta name="keywords" content="Birth Chart, Loshu Grid, Numerology, Driver, Conductor, Kuva, Name Number, Free Birth Chart">
<meta name="author" content="Rohit Patel, Ahmedabad">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PHR4KPGYPV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PHR4KPGYPV');
</script>
  <style>
    body {
      background-color: #f8f9fa;
    }
    label.form-label {
      font-weight: 500 !important;
    }
    .card {
      border-radius: 10px;
      border: 1px solid #dee2e6;
    }
    .loshu-grid {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      grid-template-rows: repeat(3, 80px);
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
    }
    .loshu-cell {
      background-color: #ffffff;
      border: 2px solid #ced4da;
      border-radius: 5px;
      text-align: center;
      vertical-align: middle;
      font-size: 20px;
      line-height: 80px;
      color: #212529;
    }
    @media (max-width: 576px) {
      .loshu-grid {
        grid-template-columns: repeat(3, 60px);
        grid-template-rows: repeat(3, 60px);
      }
      .loshu-cell {
        font-size: 16px;
        line-height: 60px;
      }
    }
    .readonly-table {
      margin-top: 20px;
      background-color: #fff;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      padding: 10px;
    }
    .description {
      background: #fff;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    .number {
      font-weight: bold;
    }
  </style>
</head>
<body> 
  <!-- End Google Tag Manager (noscript) -->
<div class="container py-4">
  <!-- Main Card for Birth Chart Form and Grid -->
  <div class="card mx-auto p-4" style="max-width: 600px;">
    <h2 class="text-center mb-4">Generate Birth Chart Free</h2>

    <form id="birthForm" class="row g-3">
      <!-- Name input -->
      <div class="col-12">
        <label for="name" class="form-label">Name</label>
        <input type="text" id="name" class="form-control" required placeholder="Enter your name">
      </div>
      <!-- Day dropdown -->
      <div class="col-4">
        <label for="day" class="form-label">Day</label>
        <select id="day" class="form-select" required>
          <option value="">--</option>
          <option>1</option><option>2</option><option>3</option>
          <option>4</option><option>5</option><option>6</option>
          <option>7</option><option>8</option><option>9</option>
          <option>10</option><option>11</option><option>12</option>
          <option>13</option><option>14</option><option>15</option>
          <option>16</option><option>17</option><option>18</option>
          <option>19</option><option>20</option><option>21</option>
          <option>22</option><option>23</option><option>24</option>
          <option>25</option><option>26</option><option>27</option>
          <option>28</option><option>29</option><option>30</option>
          <option>31</option>
        </select>
      </div>
      <!-- Month dropdown -->
      <div class="col-4">
        <label for="month" class="form-label">Month</label>
        <select id="month" class="form-select" required>
          <option value="">--</option>
          <option value="1">January</option>
          <option value="2">February</option>
          <option value="3">March</option>
          <option value="4">April</option>
          <option value="5">May</option>
          <option value="6">June</option>
          <option value="7">July</option>
          <option value="8">August</option>
          <option value="9">September</option>
          <option value="10">October</option>
          <option value="11">November</option>
          <option value="12">December</option>
        </select>
      </div>
      <!-- Year dropdown -->
      <div class="col-4">
        <label for="year" class="form-label">Year</label>
        <select id="year" class="form-select" required>
          <option value="">--</option>
        </select>
      </div>
      <!-- Gender selection -->
      <div class="col-12">
        <label class="form-label">Gender</label><br>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="gender" id="male" value="male" required>
          <label class="form-check-label" for="male">Male</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="gender" id="female" value="female" required>
          <label class="form-check-label" for="female">Female</label>
        </div>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-primary w-100">Generate Birth Chart</button>
      </div>
    </form>
    
    <!-- Loshu Grid -->
    <div class="loshu-grid" id="loshuGrid"></div>
    
    <!-- Computed Values Row -->
    <div class="row text-center mt-3">
      <div class="col">
        <strong>Driver:</strong> <span id="driverLabel"></span>
      </div>
      <div class="col">
        <strong>Conductor:</strong> <span id="conductorLabel"></span>
      </div>
      <div class="col">
        <strong>Kuva:</strong> <span id="kuvaLabel"></span>
      </div>
    </div>
    <!-- Name Number Row -->
    <div class="row text-center mt-3">
      <div class="col">
        <strong>Name Number:</strong> <span id="nameNumberLabel"></span>
      </div>
    </div>
  </div>


    
  
  <!-- Accordion for Numerology Descriptions and Mapping -->
  <div class="card mx-auto p-4 readonly-table" style="max-width: 600px; margin-top: 20px;">
 
    <div class="accordion" id="accordionExample">
      <!-- Numerology Descriptions Accordion Item -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingStaticGrid">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStaticGrid" aria-expanded="true" aria-controls="collapseStaticGrid">
            Standard Loshu Grid 
          </button>
        </h2>
        <div id="collapseStaticGrid" class="accordion-collapse collapse show" aria-labelledby="headingStaticGrid" data-bs-parent="#loshuAccordion">
          <div class="accordion-body">
            <div class="card mx-auto p-4 readonly-table" style="max-width: 600px;">
              <div class="loshu-grid">
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Rahu - રાહુ">4</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Mars - મંગળ">9</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Moon - ચંદ્ર">2</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Jupiter - ગુરુ">3</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Mercury - બુધ">5</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Ketu - કેतु">7</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Saturn - શનિ">8</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Sun - સૂર્ય">1</div>
                <div class="loshu-cell" data-bs-toggle="tooltip" title="Venus - શુક્ર">6</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingNumerology">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNumerology" aria-expanded="true" aria-controls="collapseNumerology">
            <strong>Numerology Descriptions</strong>
          </button>
        </h2>
        <div id="collapseNumerology" class="accordion-collapse collapse" aria-labelledby="headingNumerology" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <p><strong>1 (Sun - સૂર્ય):</strong> Leadership, creativity, and energy.</p>
            <p><strong>2 (Moon - ચંદ્ર):</strong> Balance, emotion, and intuition.</p>
            <p><strong>3 (Jupiter - ગુરુ):</strong> Growth, wisdom, and optimism.</p>
            <p><strong>4 (Rahu - રાહુ):</strong> Ambition and innovative thinking.</p>
            <p><strong>5 (Mercury - બુધ):</strong> Communication, versatility, and quick thinking.</p>
            <p><strong>6 (Venus - શુક્ર):</strong> Harmony, love, and beauty.</p>
            <p><strong>7 (Ketu - કેतु):</strong> Spirituality and introspection.</p>
            <p><strong>8 (Saturn - શનિ):</strong> Discipline, structure, and strength.</p>
            <p><strong>9 (Mars - મંગળ):</strong> Passion, courage, and energy.</p>
          </div>
        </div>
      </div>
      
      <!-- Alphabet to Planet Mapping Accordion Item -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingMapping">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMapping" aria-expanded="false" aria-controls="collapseMapping">
            <strong>Alphabet to Planet Mapping</strong>
          </button>
        </h2>
        <div id="collapseMapping" class="accordion-collapse collapse" aria-labelledby="headingMapping" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th><strong>ALPHABETS</strong></th>
                  <th><strong>NUMBER</strong></th>
                  <th><strong>PLANETS</strong></th>
                </tr>
              </thead>
              <tbody>
                <tr><td>A I J Q Y</td><td>1</td><td>SUN</td></tr>
                <tr><td>B K R</td><td>2</td><td>MOON</td></tr>
                <tr><td>C G L S</td><td>3</td><td>JUPITER</td></tr>
                <tr><td>D M T</td><td>4</td><td>RAHU</td></tr>
                <tr><td>E H N X</td><td>5</td><td>MERCURY</td></tr>
                <tr><td>U V W</td><td>6</td><td>VENUS</td></tr>
                <tr><td>O Z</td><td>7</td><td>KETU</td></tr>
                <tr><td>F P</td><td>8</td><td>SATURN</td></tr>
                <tr><td></td><td>9</td><td>MARS</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>



    </div>
  </div>
  
  <!-- Search History Section -->
  <div class="card mx-auto p-4 readonly-table" style="max-width: 600px; margin-top: 20px;" id="historyContainer">
    <h4 class="text-center">Search History</h4>
    <div id="historyList"></div>
  </div>
  
</div>

<!-- Bootstrap 5 Bundle JS (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      tooltipTriggerList.forEach(function (tooltipTriggerEl) {
        new bootstrap.Tooltip(tooltipTriggerEl, {
          trigger: 'hover focus click'
        });
      });
    });

  // Populate year dropdown dynamically
  document.addEventListener("DOMContentLoaded", function() {
    const yearSelect = document.getElementById("year");
    const currentYear = new Date().getFullYear();
    const startYear = currentYear - 100;
    for (let y = currentYear; y >= startYear; y--) {
      const opt = document.createElement("option");
      opt.value = y;
      opt.textContent = y;
      yearSelect.appendChild(opt);
    }
    renderHistory(); // Render history on page load
  });
  
  // Compute digital root (reduce to single digit)
  function digitalRoot(n) {
    n = parseInt(n, 10);
    while (n > 9) {
      n = String(n).split('').reduce((sum, digit) => sum + parseInt(digit, 10), 0);
    }
    return n;
  }
  
  // Compute Name Number from the provided name using the mapping:
  // A, I, J, Q, Y => 1
  // B, K, R => 2
  // C, G, L, S => 3
  // D, M, T => 4
  // E, H, N, X => 5
  // U, V, W => 6
  // O, Z => 7
  // F, P => 8
  function computeNameNumber(name) {
    name = name.toUpperCase();
    let sum = 0;
    for (let char of name) {
      if (char >= 'A' && char <= 'Z') {
        if ("AIJQY".includes(char)) {
          sum += 1;
        } else if ("BKR".includes(char)) {
          sum += 2;
        } else if ("CGLS".includes(char)) {
          sum += 3;
        } else if ("DMT".includes(char)) {
          sum += 4;
        } else if ("EHNX".includes(char)) {
          sum += 5;
        } else if ("UVW".includes(char)) {
          sum += 6;
        } else if ("OZ".includes(char)) {
          sum += 7;
        } else if ("FP".includes(char)) {
          sum += 8;
        }
      }
    }
    return digitalRoot(sum);
  }
  
  // Loshu Grid mapping (standard positions):
  //      4   9   2
  //      3   5   7
  //      8   1   6
  const positionMap = {
    1: [2, 1],
    2: [0, 2],
    3: [1, 0],
    4: [0, 0],
    5: [1, 1],
    6: [2, 2],
    7: [1, 2],
    8: [2, 0],
    9: [0, 1]
  };
  
  const birthForm = document.getElementById('birthForm');
  const loshuGridDiv = document.getElementById('loshuGrid');
  const driverLabel = document.getElementById('driverLabel');
  const conductorLabel = document.getElementById('conductorLabel');
  const kuvaLabel = document.getElementById('kuvaLabel');
  const nameNumberLabel = document.getElementById('nameNumberLabel');
  const historyListDiv = document.getElementById('historyList');
  
  // LocalStorage helpers
  function loadHistory() {
    const history = localStorage.getItem('birthChartHistory');
    return history ? JSON.parse(history) : [];
  }
  function saveHistory(history) {
    localStorage.setItem('birthChartHistory', JSON.stringify(history));
  }
  function generateKey(name, day, month, year, gender) {
    return name.trim().toLowerCase() + "_" + day + "_" + month + "_" + year + "_" + gender;
  }
  // Save record with Name Number included
  function saveToLocalStorage(name, day, month, year, gender, driver, conductor, kuva, nameNumber, grid) {
    const history = loadHistory();
    const key = generateKey(name, day, month, year, gender);
    const entry = { key, name, day, month, year, gender, driver, conductor, kuva, nameNumber, grid };
    const index = history.findIndex(rec => rec.key === key);
    if (index !== -1) {
      history[index] = entry;
    } else {
      history.push(entry);
    }
    saveHistory(history);
    renderHistory();
  }
  
  function extractNumbersFromGrid(grid) {
    return grid.flat(2);
  }
  
  // Render the Loshu grid with cell highlighting based on cell contents
  function renderGrid(grid) {
    const numbers = extractNumbersFromGrid(grid);
    const greenRequired = [4, 5, 6];
    const blueRequired = [2, 5, 8];
    loshuGridDiv.innerHTML = '';
    grid.forEach((row) => {
      row.forEach((cellArray) => {
        const cellDiv = document.createElement('div');
        cellDiv.className = 'loshu-cell';
        cellDiv.textContent = cellArray.length > 0 ? cellArray.join(' ') : '';
        // Highlight cell only if ALL numbers from a set are present in that cell
        if (greenRequired.every(num => numbers.includes(num)) &&  cellArray.some(digit => greenRequired.includes(digit))) {
          cellDiv.classList.add('bg-success', 'text-white');
        } else if (blueRequired.every(num => numbers.includes(num)) &&  cellArray.some(digit => blueRequired.includes(digit))) {
          cellDiv.classList.add('bg-primary', 'text-white');
        }
        loshuGridDiv.appendChild(cellDiv);
      });
    });
  }
  
  // Render search history in descending order (most recent first)
  function renderHistory() {
    const history = loadHistory();
    historyListDiv.innerHTML = '';
    if (history.length === 0) {
      historyListDiv.textContent = "No search history yet.";
      return;
    }
    const sortedHistory = history.slice().reverse();
    const listGroup = document.createElement('div');
    listGroup.className = 'list-group';
    sortedHistory.forEach(record => {
      const item = document.createElement('button');
      item.type = 'button';
      item.className = 'list-group-item list-group-item-action';
      item.textContent = `${record.name} - ${record.day}/${record.month}/${record.year} (${record.gender})`;
      item.addEventListener('click', () => {
        loadRecord(record);
      });
      listGroup.appendChild(item);
    });
    historyListDiv.appendChild(listGroup);
  }
  
  // Load a record from history into the form and display its values
  function loadRecord(record) {
    document.getElementById('name').value = record.name;
    document.getElementById('day').value = record.day;
    document.getElementById('month').value = record.month;
    document.getElementById('year').value = record.year;
    if(record.gender === 'male') {
      document.getElementById('male').checked = true;
    } else {
      document.getElementById('female').checked = true;
    }
    renderGrid(record.grid);
    driverLabel.textContent = record.driver;
    conductorLabel.textContent = record.conductor;
    kuvaLabel.textContent = record.kuva;
    document.getElementById('nameNumberLabel').textContent = record.nameNumber;
  }
  
  birthForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const nameValue = document.getElementById('name').value.trim();
    const dayValue = parseInt(document.getElementById('day').value, 10);
    const monthValue = parseInt(document.getElementById('month').value, 10);
    const yearValue = parseInt(document.getElementById('year').value, 10);
    const gender = document.querySelector('input[name="gender"]:checked').value;
    if (!nameValue || !dayValue || !monthValue || !yearValue || !gender) {
      alert('Please enter Name, select Day, Month, Year, and Gender.');
      return;
    }
    const dayString = dayValue < 10 ? '0' + dayValue : '' + dayValue;
    const monthString = monthValue < 10 ? '0' + monthValue : '' + monthValue;
    const yearString = '' + yearValue;
    const combined = dayString + monthString + yearString;
    
    // Prepare a 3x3 grid array for the Loshu grid
    const loshuGrid = Array.from({ length: 3 }, () =>
      Array.from({ length: 3 }, () => [])
    );
    combined.split('').forEach((char) => {
      const digit = parseInt(char, 10);
      if (digit !== 0 && positionMap[digit]) {
        const [row, col] = positionMap[digit];
        loshuGrid[row][col].push(digit);
      }
    });
    
    const driver = digitalRoot(dayValue);
    const sumDigits = combined.split('').reduce((sum, digit) => sum + parseInt(digit, 10), 0);
    const conductor = digitalRoot(sumDigits);
    const yearDigital = digitalRoot(yearValue);
    let kuvaCalc;
    if (gender === 'male') {
      kuvaCalc = digitalRoot(11 - yearDigital);
    } else {
      kuvaCalc = digitalRoot(yearDigital + 4);
    }
    
    // Process computed values into the grid
    const computedValues = [driver, conductor, kuvaCalc];
    computedValues.forEach(value => {
      value.toString().split('').forEach(char => {
        const digit = parseInt(char, 10);
        if (digit !== 0 && positionMap[digit]) {
          const [row, col] = positionMap[digit];
          loshuGrid[row][col].push(digit);
        }
      });
    });
    
    // Compute the Name Number from the input name
    const nameNumber = computeNameNumber(nameValue);
    
    // Render the Loshu grid and update computed labels
    renderGrid(loshuGrid);
    driverLabel.textContent = driver;
    conductorLabel.textContent = conductor;
    kuvaLabel.textContent = kuvaCalc;
    document.getElementById('nameNumberLabel').textContent = nameNumber;
    
    // Save record (including nameNumber) to localStorage
    saveToLocalStorage(nameValue, dayValue, monthValue, yearValue, gender, driver, conductor, kuvaCalc, nameNumber, loshuGrid);
  });
</script>
</body>
</html>
